## OCI 标准

OCI 指的是开放容器标准，这也是 Docker 在 2015 发起的开源项目，旨在将容器标准化并提供更广泛的兼容性，OCI 专注于创建开放的、标准化的容器镜像格式与容器运行规范，确保跨平台的兼容性。

## 容器中的 PID 1 进程
回到刚刚进入的 Ubuntu 容器，输入
```bash
ps aux
```
输出如下
```bash
root@3881dd835228:/# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0   4296  3548 pts/0    Ss   09:16   0:00 bash
root        13  0.0  0.0   7628  3524 pts/0    R+   09:20   0:00 ps aux
```
可以看到 PID 1 进程是一个 Bash
回想一下刚刚我们是如何运行容器的
```bash
docker run -it ubuntu bash
```
这里运行 ubuntu 的命令刚好和 PID 1 的 COMMAND 对上了
那如果我只运行 ps aux 呢
```bash
docker run -it --rm ubuntu ps aux
```
可以看到 PID 1 就是`启动容器时`的那个命令
```bash
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0   7628  3340 pts/0    Rs+  09:33   0:00 ps aux
```
并且运行完容器就退出了，**PID 1 退出后容器就会退出**
而真实情况或虚拟机内的 PID 1 是系统启动的 init 程序
```bash
$ ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.0  0.5  23040 11528 ?        Ss   Aug29   8:48 /sbin/init showopts
root           2  0.0  0.0      0     0 ?        S    Aug29   0:01 [kthreadd]
root           3  0.0  0.0      0     0 ?        S    Aug29   0:00 [pool_workqueue_release]
...
```
这就是容器和虚拟机的区别：
容器是通过 **Linux Namespace + Cgroup** 实现的轻量化进程隔离，而不是一台完整的虚拟机。因此，容器内部的 **PID 1** 与真实机器或虚拟机中的 **PID 1（init/systemd）** 本质上有很大的不同。
**虚拟机的 PID 1 是系统的 init，用来管理整台机器。**
**容器的 PID 1 是你的应用本身，用来作为容器生命周期的根。**


